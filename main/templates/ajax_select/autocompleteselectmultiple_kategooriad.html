<div id="{{html_id}}_on_deck" class="results_on_deck"></div>
<input type="text" name="{{name}}_text" id="{{html_id}}_text" value="" autocomplete="off"  {{ extra_attrs }} />
{% if add_link %}
	<a href="{{ add_link }}" class="add-another addlink" id="add_{{ html_id }}" onclick="return showAddAnotherPopup(this);"> add</a>
{% endif %}
<input type="hidden" name="{{name}}" id="{{html_id}}" value="{{current_ids}}" data-ajax-select="autocompleteselectmultiple" data-plugin-options="{{ data_plugin_options }}" />

{% block extra_script %}
{% comment %} <script type="application/javascript"> {% endcomment %}
{#  function {{html_id}}_kontrolli(elementId) {#}
{#    console.log(elementId);#}
{#    var outerDiv = document.getElementById("{{html_id}}_on_deck");#}
{#    let items = outerDiv.childNodes.length;#}
{#    if (items > 0) {#}
{#      let childNode = outerDiv.childNodes[items - 1];#}
{#      let childNodeTextSplits = childNode.textContent.trim().split(' ');#}
{#      let childNodeText = childNodeTextSplits[1].trim();#}
{#      if (childNodeText.includes('.') === false) {#}
{#        console.log('viga!');#}
{#        document.getElementById("{{html_id}}_text").value = childNodeText + '.';#}
{#        $(childNode).find('span').trigger( "click" );#}
{#      }#}
{#    }#}
{#  }#}
{#    #}
  {% comment %} $("#{{html_id}}_on_deck").bind('added', function() {
    var id = $("#{{html_id}}").val();
    console.log('added id:' + id );
    let elementId = "#{{html_id}}"
    // {{html_id}}_kontrolli(elementId);
  });

  $("#{{html_id}}_on_deck").bind('killed', function() {
    var current = $("#{{html_id}}").val();
    console.log('removed, current is:' + current);
  });
</script> {% endcomment %}
{% endblock %}
{# django admin adds the help text. this is for use outside of the admin #}
{% block help %}{% if help_text %}<p class="help">{{help_text}}</p>{% endif %}{% endblock %}